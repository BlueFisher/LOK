@model List<OrderRecord>

@{
	ViewBag.Title = "SuperAdminControl";
	Layout = "~/Views/Shared/_LayoutGlobal.cshtml";
}

@helper getEventText(OrderStatusEnum status) {
	switch(status) {
		case OrderStatusEnum.Closed:
			<span>关闭订单</span>
			break;
		case OrderStatusEnum.Completed:
		<span>完成订单</span>
			break;
		case OrderStatusEnum.Confirming:
		<span>待确认</span>
			break;
		case OrderStatusEnum.Failed:
		<span>取消订单</span>
			break;
		case OrderStatusEnum.OnGoing:
		<span>确认订单，正在上门</span>
			break;
	}
}

@section JavaScript{
	<script src="~/Scripts/admin.superAdminControl.js"></script>
}

<div class="modal fade" id="modal-add-admin">
	<div class="modal-dialog modal-sm">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"><span>&times;</span></button>
				<h4 class="modal-title">添加管理员</h4>
			</div>
			<div class="modal-body">
				<form action="/Admin/AddAdmin" method="POST" id="form-add-admin">
					<div class="form-group">
						<label class="control-label" for="signup-email">邮箱</label>
						<input type="email" class="form-control" id="signup-email" name="Email" placeholder="">
					</div>
					<div class="form-group">
						<label class="control-label" for="signup-nickname">昵称</label>
						<input type="text" class="form-control" id="signup-nickname" name="NickName" placeholder="">
					</div>
					<div class="form-group">
						<label class="control-label" for="signup-password">密码</label>
						<input type="password" class="form-control" id="signup-password" name="Password" placeholder="">
					</div>
					<div class="form-group">
						<label class="control-label" for="signup-passwordrepeat">重复密码</label>
						<input type="password" class="form-control" id="signup-passwordrepeat" name="PasswordRepeat" placeholder="">
					</div>
					<div class="btn-group">
						<button type="submit" class="btn btn-primary btn-material">保存</button>
						<button type="button" class="btn btn-default btn-material" data-dismiss="modal">取消</button>
					</div>
				</form>
			</div>
		</div>
	</div>
</div>

<div class="container-fluid">
	<div class="panel panel-default" id="panel-admin">
		<div class="panel-heading">
			<h3 class="panel-title"><button class="btn btn-primary btn-material" data-toggle="modal" data-target="#modal-add-admin"><i class="fa fa-plus"></i> 添加管理员</button></h3>
		</div>
		<!-- Ajax Region -->
	</div>
	<div class="panel panel-default">
		<div class="panel-heading">
			<h3 class="panel-title">事件记录</h3>
		</div>
		<table class="table">
			<tr>
				<th>操作员</th>
				<th>订单号</th>
				<th>订单事件</th>
				<th>时间</th>
			</tr>
			@foreach(OrderRecord item in Model) {
				if(item.OrderId != null) {
					<tr data-user-id="@item.UserId">
						<td>@item.ApplicationUser.UserName</td>
						<td>@item.OrderId</td>
						<td>
							@if(item.Other != null) {
								<span>@item.Other</span>
							}
							else {
								@getEventText(item.ToStatus);
							}
						</td>
						<td>@item.StartTime</td>
					</tr>
				}
			}
		</table>

	</div>
</div>